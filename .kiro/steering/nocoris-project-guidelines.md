---
inclusion: always
---

# Nocoris プロジェクト固有ガイドライン

リスをイメージしたアイテム管理アプリ「Nocoris」の開発における固有のガイドラインです。

## プロジェクト概要

- **アプリ名:** Nocoris（ノコリス）
- **コンセプト:** リスをイメージした温かみのあるアイテム管理アプリ
- **主要機能:** アイテムの追加・編集・削除、カウント管理、絵文字アイコン設定

## デザインシステム

### カラーパレット
- **プライマリ:** 茶色系（リスの体の色をイメージ）
- **セカンダリ:** ベージュ系（優しく温かみのある背景色）
- **アクセント:** オレンジ系（強調やアクション用）
- **エラー:** ピーチ/サーモンピンク系

### UI/UXガイドライン
- 温かみのあるデザインを維持
- カードベースのレイアウト
- 直感的な操作性を重視
- アクセシビリティを考慮

## アーキテクチャ

### ディレクトリ構造
```
lib/
├── features/
│   └── item/           # アイテム管理機能
│       ├── models/     # Itemモデル
│       ├── providers/  # 状態管理
│       ├── screens/    # 画面
│       ├── services/   # ビジネスロジック
│       └── widgets/    # UI コンポーネント
├── common/
│   └── widgets/        # 共通ウィジェット
├── core/
│   ├── constants/      # 定数
│   ├── services/       # コアサービス
│   └── theme/          # テーマ設定
└── main.dart
```

### 状態管理
- **Riverpod** を使用（現在の実装に基づく）
- 機能ごとに状態を分離
- 不変性を重視したデータモデル

## コーディング規約

### モデルクラス
- 不変性を保つ
- `copyWith` メソッドでセンチネル値パターンを使用
- 適切な `toString`, `==`, `hashCode` を実装

### ウィジェット
- 単一責任の原則に従う
- `const` コンストラクタを積極的に使用
- プライベートウィジェットには `_` プレフィックス

### ファイル命名
- `snake_case` を使用
- 機能を表す明確な名前
- 例: `item_form_screen.dart`, `emoji_picker_widget.dart`

## テスト戦略

### 必須テスト
- モデルクラスの単体テスト
- サービスクラスの単体テスト
- 重要なウィジェットのウィジェットテスト

### テストファイル構造
- `test/` ディレクトリは `lib/` をミラーリング
- テスト名は日本語で記述可能
- `setUp` と `tearDown` を適切に使用

## 国際化・ローカライゼーション

### 文字列管理
- ハードコードされた文字列を避ける
- 将来的な多言語対応を考慮
- 現在は日本語中心だが、構造は国際化対応

### 日本語UI
- 自然な日本語表現を使用
- 例: 「残数」→「のこり」

## パフォーマンス

### 最適化ポイント
- リスト表示での `ListView.builder` 使用
- 画像・アイコンの適切なキャッシュ
- 不要な再描画の回避

### メモリ管理
- `TextEditingController` の適切な破棄
- `StreamSubscription` のクリーンアップ
- 大きなリストでの効率的な描画

## セキュリティ

### データ保護
- ローカルストレージでの適切なデータ管理
- ユーザー入力の検証
- 機密情報の適切な取り扱い

## デプロイメント

### ビルド設定
- プラットフォーム別の最適化
- アプリアイコンとスプラッシュスクリーンの設定
- 適切なバージョン管理

### リリース準備
- テストの実行確認
- パフォーマンステスト
- 各プラットフォームでの動作確認

## 開発フロー

### ブランチ戦略
- `main`: 本番用
- `develop`: 開発用
- `feature/*`: 機能開発用

### コミット規約
- Conventional Commits形式を推奨
- 例: `feat: アイテムアイコン機能を追加`, `fix: copyWithメソッドの修正`

### PR・レビュー
- 機能単位でのPR作成
- コードレビューでの品質確保
- テスト通過の確認

このガイドラインに従って、一貫性のある高品質なNocorisアプリを開発しましょう。
